<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Quaternion (OCADml.OCADml.Quaternion)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">OCADml</a> &#x00BB; <a href="../index.html">OCADml</a> &#x00BB; Quaternion</nav><header class="odoc-preamble"><h1>Module <code><span>OCADml.Quaternion</span></code></h1><p>Provides functions for the creation of and operations between <a href="https://en.wikipedia.org/wiki/Quaternion">quaternions</a>. These can be used to create composable and interpolatable rotations to be applied to 3d vectors (<a href="../V3/index.html#type-t"><code>V3.t</code></a>), and shapes.</p></header><nav class="odoc-toc"><ul><li><a href="#basic-arithmetic">Basic Arithmetic</a></li><li><a href="#vector-math">Vector Math</a></li><li><a href="#vector-transformations">Vector Transformations</a></li><li><a href="#utilities">Utilities</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-id"><a href="#val-id" class="anchor"></a><code><span><span class="keyword">val</span> id : <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>The identity quaternion: <code>{ x = 0.; y = 0.; z = 0.; w = 1. }</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make"><a href="#val-make" class="anchor"></a><code><span><span class="keyword">val</span> make : <span><a href="../V3/index.html#type-t">V3.t</a> <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>make ax angle</code></p><p>Create a quaternion representing a rotation of <code>angle</code> (in radians) around the vector <code>ax</code>.</p></div></div><h2 id="basic-arithmetic"><a href="#basic-arithmetic" class="anchor"></a>Basic Arithmetic</h2><div class="odoc-spec"><div class="spec value anchored" id="val-add"><a href="#val-add" class="anchor"></a><code><span><span class="keyword">val</span> add : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>add a b</code></p><p>Hadamard (element-wise) addition of quaternions <code>a</code> and <code>b</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sub"><a href="#val-sub" class="anchor"></a><code><span><span class="keyword">val</span> sub : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>sub a b</code></p><p>Hadamard (element-wise) subtraction of quaternion <code>b</code> from <code>a</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mul"><a href="#val-mul" class="anchor"></a><code><span><span class="keyword">val</span> mul : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>mul a b</code></p><p>Quaternion multiplication of <code>a</code> and <code>b</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-neg"><a href="#val-neg" class="anchor"></a><code><span><span class="keyword">val</span> neg : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>neg t</code></p><p>Negation of all elements of <code>t</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sadd"><a href="#val-sadd" class="anchor"></a><code><span><span class="keyword">val</span> sadd : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>sadd t s</code></p><p>Add <code>s</code> to the magnitude of <code>t</code>, leaving the imaginary parts unchanged.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-ssub"><a href="#val-ssub" class="anchor"></a><code><span><span class="keyword">val</span> ssub : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>ssub t s</code></p><p>Subtract <code>s</code> from the magnitude of <code>t</code>, leaving the imaginary parts unchanged.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-ssub_neg"><a href="#val-ssub_neg" class="anchor"></a><code><span><span class="keyword">val</span> ssub_neg : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>ssub_neg t s</code></p><p>Negate the imaginary parts of <code>t</code>, and subtract the magnitude from <code>s</code> to obtain the new magnitude.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-smul"><a href="#val-smul" class="anchor"></a><code><span><span class="keyword">val</span> smul : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>smul t s</code></p><p>Element-wise multiplication of <code>t</code> by <code>s</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sdiv"><a href="#val-sdiv" class="anchor"></a><code><span><span class="keyword">val</span> sdiv : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>div_scalar t s</code></p><p>Element-wise division of <code>t</code> by <code>s</code>.</p></div></div><h2 id="vector-math"><a href="#vector-math" class="anchor"></a>Vector Math</h2><div class="odoc-spec"><div class="spec value anchored" id="val-norm"><a href="#val-norm" class="anchor"></a><code><span><span class="keyword">val</span> norm : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> float</span></code></div><div class="spec-doc"><p><code>norm t</code></p><p>Calculate the vector norm (a.k.a. magnitude) of <code>t</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-normalize"><a href="#val-normalize" class="anchor"></a><code><span><span class="keyword">val</span> normalize : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>normalize t</code></p><p>Normalize <code>t</code> to a quaternion for which the magnitude is equal to 1. e.g. <code>norm (normalize t) = 1.</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-dot"><a href="#val-dot" class="anchor"></a><code><span><span class="keyword">val</span> dot : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> float</span></code></div><div class="spec-doc"><p><code>dot a b</code></p><p>Vector dot product of <code>a</code> and <code>b</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-conj"><a href="#val-conj" class="anchor"></a><code><span><span class="keyword">val</span> conj : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>conj t</code></p><p>Take the conjugate of the quaternion <code>t</code>, negating the imaginary parts (x, y, and z) of <code>t</code>, leaving the magnitude unchanged.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-distance"><a href="#val-distance" class="anchor"></a><code><span><span class="keyword">val</span> distance : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> float</span></code></div><div class="spec-doc"><p><code>distance a b</code></p><p>Calculate the magnitude of the difference (Hadamard subtraction) between <code>a</code> and <code>b</code>.</p></div></div><p>Conversions</p><div class="odoc-spec"><div class="spec value anchored" id="val-of_euler"><a href="#val-of_euler" class="anchor"></a><code><span><span class="keyword">val</span> of_euler : <span><a href="../V3/index.html#type-t">V3.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>of_euler v</code></p><p>Create a quaternion equivalent to the Euler angle rotations represented by <code>v</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_euler"><a href="#val-to_euler" class="anchor"></a><code><span><span class="keyword">val</span> to_euler : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../V3/index.html#type-t">V3.t</a></span></code></div><div class="spec-doc"><p><code>to_euler t</code></p><p>Convert the quaternion <code>t</code> to equivalent Euler angles.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_affine"><a href="#val-to_affine" class="anchor"></a><code><span><span class="keyword">val</span> to_affine : <span>?trans:<a href="../V3/index.html#type-t">V3.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Affine3/index.html#type-t">Affine3.t</a></span></code></div><div class="spec-doc"><p><code>to_affine ?trans t</code></p><p>Convert quaternion <code>t</code> into an <a href="../Affine3/index.html#type-t"><code>Affine3.t</code></a>, optionally providing a translation vector <code>trans</code> to tack on.</p></div></div><h2 id="vector-transformations"><a href="#vector-transformations" class="anchor"></a>Vector Transformations</h2><div class="odoc-spec"><div class="spec value anchored" id="val-align"><a href="#val-align" class="anchor"></a><code><span><span class="keyword">val</span> align : <span><a href="../V3/index.html#type-t">V3.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../V3/index.html#type-t">V3.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>align a b</code></p><p>Calculate a quaternion that would bring <code>a</code> into alignment with <code>b</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-transform"><a href="#val-transform" class="anchor"></a><code><span><span class="keyword">val</span> transform : <span>?about:<a href="../V3/index.html#type-t">V3.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../V3/index.html#type-t">V3.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../V3/index.html#type-t">V3.t</a></span></code></div><div class="spec-doc"><p><code>transform ?about t v</code></p><p>Rotate <code>v</code> with the quaternion <code>t</code> around the origin (or the point <code>about</code> if provided).</p></div></div><h2 id="utilities"><a href="#utilities" class="anchor"></a>Utilities</h2><div class="odoc-spec"><div class="spec value anchored" id="val-slerp"><a href="#val-slerp" class="anchor"></a><code><span><span class="keyword">val</span> slerp : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>slerp a b step</code></p><p>Spherical linear interpotation. Adapted from <a href="https://github.com/KieranWynn/pyquaternion">pyquaternion</a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_string"><a href="#val-to_string" class="anchor"></a><code><span><span class="keyword">val</span> to_string : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div></div></body></html>