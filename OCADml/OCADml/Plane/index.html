<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Plane (OCADml.OCADml.Plane)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">OCADml</a> &#x00BB; <a href="../index.html">OCADml</a> &#x00BB; Plane</nav><header class="odoc-preamble"><h1>Module <code><span>OCADml.Plane</span></code></h1><p>Normalized cartesian plane operations facilitating conversion between 2d and 3d space.</p></header><nav class="odoc-toc"><ul><li><a href="#basic-workplanes">Basic Workplanes</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>Normalized cartesian equation of a plane.</p><p>The type <a href="#type-t"><code>t</code></a> contains the coefficients <b>A</b>, <b>B</b>, <b>C</b>, and <b>D</b>, which describe the cartesian equation of a plane where <code>Ax + By + Cz = D</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_tup"><a href="#val-to_tup" class="anchor"></a><code><span><span class="keyword">val</span> to_tup : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> float * float * float * float</span></code></div><div class="spec-doc"><p><code>to_tup t</code></p><p>Return the plane <code>t</code> as a tuple of its coefficients.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_tup"><a href="#val-of_tup" class="anchor"></a><code><span><span class="keyword">val</span> of_tup : <span><span>(float * float * float * float)</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>of_tup (a, b, c, d)</code></p><p>Create a plane from a tuple of coefficients (xyz normal and offset).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_v4"><a href="#val-to_v4" class="anchor"></a><code><span><span class="keyword">val</span> to_v4 : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-v4">v4</a></span></code></div><div class="spec-doc"><p><code>to_v4 t</code></p><p>Return the plane <code>t</code> as a 4d vector of coefficients.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_v4"><a href="#val-of_v4" class="anchor"></a><code><span><span class="keyword">val</span> of_v4 : <span><a href="../index.html#type-v4">v4</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>of_v4 v</code></p><p>Create a plane from a 4d vector containing coefficients (xyz normal and offset).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make"><a href="#val-make" class="anchor"></a><code><span><span class="keyword">val</span> make : <span><a href="../V3/index.html#type-t">V3.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../V3/index.html#type-t">V3.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../V3/index.html#type-t">V3.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>make p1 p2 p3</code></p><p>Create a <a href="#type-t"><code>t</code></a>, which represents the normalized cartesian equation of a plane, with three points. Returns <code>(a, b, c, d)</code> where <code>ax + by + cz = d</code> is the equation of a plane. Throws <code>Invalid_argument</code> if the points are colinear.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_normal"><a href="#val-of_normal" class="anchor"></a><code><span><span class="keyword">val</span> of_normal : <span>?point:<a href="../V3/index.html#type-t">V3.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../V3/index.html#type-t">V3.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>of_normal ?point normal</code></p><p>Create a normalized cartesian plane <a href="#type-t"><code>t</code></a> from a <code>normal</code> vector, and a <code>point</code> (defaulting to <code>(0., 0.)</code>) located on the plane that the <code>normal</code> is projecting off of.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_affine"><a href="#val-to_affine" class="anchor"></a><code><span><span class="keyword">val</span> to_affine : <span>op:<span>[ `Project <span>| `Lift</span> ]</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Affine3/index.html#type-t">Affine3.t</a></span></code></div><div class="spec-doc"><p><code>to_affine ~op t</code></p><p>Compute an affine transformation matrix that moves 3d objects into (<code>~op:`Project</code>) or out of (<code>~op:`Lift</code>) the coordinate system of the plane <code>t</code> from/to the base coordinate system (XY plane).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-project"><a href="#val-project" class="anchor"></a><code><span><span class="keyword">val</span> project : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../V3/index.html#type-t">V3.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../V2/index.html#type-t">V2.t</a></span></code></div><div class="spec-doc"><p><code>project t p</code></p><p>Project the 3d point <code>p</code> onto the plane <code>t</code>. On partial application of <code>t</code>, a <a href="../Affine3/index.html#type-t"><code>Affine3.t</code></a> is computed to perform the projection transform.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lift"><a href="#val-lift" class="anchor"></a><code><span><span class="keyword">val</span> lift : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../V2/index.html#type-t">V2.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../V3/index.html#type-t">V3.t</a></span></code></div><div class="spec-doc"><p><code>lift t p</code></p><p>Lift the 2d point <code>p</code> onto the plane <code>t</code>. On partial application of <code>t</code>, a <a href="../Affine3/index.html#type-t"><code>Affine3.t</code></a> is computed to perform the lift transform.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-normal"><a href="#val-normal" class="anchor"></a><code><span><span class="keyword">val</span> normal : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../V3/index.html#type-t">V3.t</a></span></code></div><div class="spec-doc"><p><code>normal t</code></p><p>Return the normalized (unit length) normal vector of the plane <code>t</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-offset"><a href="#val-offset" class="anchor"></a><code><span><span class="keyword">val</span> offset : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> float</span></code></div><div class="spec-doc"><p><code>offset t</code></p><p>Obtain the coefficient <b>d</b> of the normalized plane <code>t</code>, or the scalar offset of the plane from the origin. The absolute value of this coefficient is the distance of the plane from the origin.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-normalize"><a href="#val-normalize" class="anchor"></a><code><span><span class="keyword">val</span> normalize : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>normalize t</code></p><p>Normalize the <b>a</b>, <b>b</b>, and <b>c</b> coefficients of the plane <code>t</code>, such that their vector norm is equal to one.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-neg"><a href="#val-neg" class="anchor"></a><code><span><span class="keyword">val</span> neg : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>neg_normal t</code></p><p>Negate the plane <code>t</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-distance_to_point"><a href="#val-distance_to_point" class="anchor"></a><code><span><span class="keyword">val</span> distance_to_point : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../V3/index.html#type-t">V3.t</a> <span class="arrow">&#45;&gt;</span></span> float</span></code></div><div class="spec-doc"><p><code>distance_to_point t p</code></p><p>Calculate the distance to the point <code>p</code> from the plane <code>t</code>. A negative distance indicates that <code>p</code> resides below <code>t</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-greatest_distance"><a href="#val-greatest_distance" class="anchor"></a><code><span><span class="keyword">val</span> greatest_distance : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="../V3/index.html#type-t">V3.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> float</span></code></div><div class="spec-doc"><p><code>greatest_distance t ps</code></p><p>Calculate the greatest absolute distance between the plane <code>t</code>, and the 3d points <code>ps</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-are_points_on"><a href="#val-are_points_on" class="anchor"></a><code><span><span class="keyword">val</span> are_points_on : <span>?eps:float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="../V3/index.html#type-t">V3.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>are_points_on ?eps t ps</code></p><p>Returns <code>true</code> if all points <code>ps</code> are within <code>eps</code> distance of the plane <code>t</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_point_above"><a href="#val-is_point_above" class="anchor"></a><code><span><span class="keyword">val</span> is_point_above : <span>?eps:float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../V3/index.html#type-t">V3.t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>is_point_above ?eps t p</code></p><p>Returns <code>true</code> is point <code>p</code> is <code>eps</code> (default <code>1e-9</code>) distance above the plane <code>t</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-line_angle"><a href="#val-line_angle" class="anchor"></a><code><span><span class="keyword">val</span> line_angle : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../V3/index.html#type-line">V3.line</a> <span class="arrow">&#45;&gt;</span></span> float</span></code></div><div class="spec-doc"><p><code>line_angle t line</code></p><p>Calculate the angle between the plane <code>t</code> and a 3d <code>line</code>. The resulting angle is positive if the line vector lies above the plane (on the same side as the normal vector of <code>t</code>).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-line_intersection"><a href="#val-line_intersection" class="anchor"></a><code><span><span class="keyword">val</span> line_intersection : 
  <span>?eps:float <span class="arrow">&#45;&gt;</span></span>
  <span>?bounds:<span>(bool * bool)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../V3/index.html#type-line">V3.line</a> <span class="arrow">&#45;&gt;</span></span>
  <span>[ `OutOfBounds <span><span>| `OnPlane</span> of <a href="../V3/index.html#type-line">V3.line</a></span> <span>| `Parallel</span> <span><span>| `Point</span> of <a href="../V3/index.html#type-t">V3.t</a> * float</span> ]</span></span></code></div><div class="spec-doc"><p><code>line_intersection t line</code></p><p>Find the intersection between a 3d <code>line</code> and the plane <code>t</code> (within <code>eps</code> tolerance, default <code>1e-9</code>), if it exists. <code>bounds</code> indicates whether <code>line</code> is capped at either (ray) or both (segment) of its ends (default is unbounded (<code>bounds = (false, false)</code>).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_string"><a href="#val-to_string" class="anchor"></a><code><span><span class="keyword">val</span> to_string : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><h2 id="basic-workplanes"><a href="#basic-workplanes" class="anchor"></a>Basic Workplanes</h2><div class="odoc-spec"><div class="spec value anchored" id="val-xy"><a href="#val-xy" class="anchor"></a><code><span><span class="keyword">val</span> xy : <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-xz"><a href="#val-xz" class="anchor"></a><code><span><span class="keyword">val</span> xz : <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-yz"><a href="#val-yz" class="anchor"></a><code><span><span class="keyword">val</span> yz : <a href="#type-t">t</a></span></code></div></div></div></body></html>