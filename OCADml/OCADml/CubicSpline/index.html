<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>CubicSpline (OCADml.OCADml.CubicSpline)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">OCADml</a> &#x00BB; <a href="../index.html">OCADml</a> &#x00BB; CubicSpline</nav><header class="odoc-preamble"><h1>Module <code><span>OCADml.CubicSpline</span></code></h1><p>Cubic <a href="https://en.wikipedia.org/wiki/Spline_interpolation">spline interpolation</a> of 2d paths.</p><p>This is a port of a <a href="https://github.com/Simsso/Online-Tools/blob/master/src/page/logic/cubic-spline-interpolation.js">javascript implementation</a> underlying a <a href="https://tools.timodenk.com/cubic-spline-interpolation">spline visualization tool</a> by Timo Denk.</p></header><nav class="odoc-toc"><ul><li><a href="#immutable-access-to-fit-results">Immutable access to fit results</a><ul><li><a href="#index-getters">Index getters</a></li></ul></li><li><a href="#fitting">Fitting</a></li><li><a href="#extrapolation">Extrapolation</a></li><li><a href="#utility">Utility</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-boundary" class="anchored"><a href="#type-boundary" class="anchor"></a><code><span><span class="keyword">type</span> boundary</span><span> = </span><span>[ </span></code><table><tr id="type-boundary.Quadratic" class="anchored"><td class="def constructor"><a href="#type-boundary.Quadratic" class="anchor"></a><code><span>| </span></code><code><span>`Quadratic</span></code></td></tr><tr id="type-boundary.NotAKnot" class="anchored"><td class="def constructor"><a href="#type-boundary.NotAKnot" class="anchor"></a><code><span>| </span></code><code><span>`NotAKnot</span></code></td></tr><tr id="type-boundary.Periodic" class="anchored"><td class="def constructor"><a href="#type-boundary.Periodic" class="anchor"></a><code><span>| </span></code><code><span>`Periodic</span></code></td></tr><tr id="type-boundary.Natural" class="anchored"><td class="def constructor"><a href="#type-boundary.Natural" class="anchor"></a><code><span>| </span></code><code><span>`Natural</span></code></td></tr></table><code><span> ]</span></code></div><div class="spec-doc"><p>Boundary condition for cubic spline fitting.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-coef" class="anchored"><a href="#type-coef" class="anchor"></a><code><span><span class="keyword">type</span> coef</span><span> = <span class="keyword">private</span> </span><span>{</span></code><table><tr id="type-coef.a" class="anchored"><td class="def record field"><a href="#type-coef.a" class="anchor"></a><code><span>a : float;</span></code></td></tr><tr id="type-coef.b" class="anchored"><td class="def record field"><a href="#type-coef.b" class="anchor"></a><code><span>b : float;</span></code></td></tr><tr id="type-coef.c" class="anchored"><td class="def record field"><a href="#type-coef.c" class="anchor"></a><code><span>c : float;</span></code></td></tr><tr id="type-coef.d" class="anchored"><td class="def record field"><a href="#type-coef.d" class="anchor"></a><code><span>d : float;</span></code></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>Cubic spline coefficients</p></div></div><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>Calculated coefficients along with the X ranges that they apply to. Abstracted to protect array access</p></div></div><h2 id="immutable-access-to-fit-results"><a href="#immutable-access-to-fit-results" class="anchor"></a>Immutable access to fit results</h2><div class="odoc-spec"><div class="spec value" id="val-len" class="anchored"><a href="#val-len" class="anchor"></a><code><span><span class="keyword">val</span> len : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>len t</code></p><p>Length of the X range and coefficient arrays stored in <code>t</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-xmins" class="anchored"><a href="#val-xmins" class="anchor"></a><code><span><span class="keyword">val</span> xmins : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>float list</span></span></code></div><div class="spec-doc"><p><code>xmins t</code></p><p>Minimum X values to which the coefficients at the same indices within <code>t</code> apply.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-xmaxs" class="anchored"><a href="#val-xmaxs" class="anchor"></a><code><span><span class="keyword">val</span> xmaxs : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>float list</span></span></code></div><div class="spec-doc"><p><code>xmaxs t</code></p><p>Maximum X values to which the coefficients at the same indices within <code>t</code> apply.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-coefs" class="anchored"><a href="#val-coefs" class="anchor"></a><code><span><span class="keyword">val</span> coefs : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-coef">coef</a> list</span></span></code></div><div class="spec-doc"><p><code>coefs t</code></p><p>Coefficients describing a cubic spline, as calculated by <a href="#val-fit"><code>fit</code></a>.</p></div></div><h3 id="index-getters"><a href="#index-getters" class="anchor"></a>Index getters</h3><div class="odoc-spec"><div class="spec value" id="val-get_xmin" class="anchored"><a href="#val-get_xmin" class="anchor"></a><code><span><span class="keyword">val</span> get_xmin : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>float option</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-get_xmax" class="anchored"><a href="#val-get_xmax" class="anchor"></a><code><span><span class="keyword">val</span> get_xmax : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>float option</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-get_coef" class="anchored"><a href="#val-get_coef" class="anchor"></a><code><span><span class="keyword">val</span> get_coef : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-coef">coef</a> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-get_xmin_exn" class="anchored"><a href="#val-get_xmin_exn" class="anchor"></a><code><span><span class="keyword">val</span> get_xmin_exn : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> float</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-get_xmax_exn" class="anchored"><a href="#val-get_xmax_exn" class="anchor"></a><code><span><span class="keyword">val</span> get_xmax_exn : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> float</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-get_coef_exn" class="anchored"><a href="#val-get_coef_exn" class="anchor"></a><code><span><span class="keyword">val</span> get_coef_exn : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <a href="#type-coef">coef</a></span></code></div></div><h2 id="fitting"><a href="#fitting" class="anchor"></a>Fitting</h2><div class="odoc-spec"><div class="spec value" id="val-fit" class="anchored"><a href="#val-fit" class="anchor"></a><code><span><span class="keyword">val</span> fit : <span>?boundary:<a href="#type-boundary">boundary</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="../V2/index.html#type-t">V2.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>fit ?boundary ps</code></p><p>Calculate cubic spline coefficients with the <code>boundary</code> condition (defaults to <code>`Natural</code>) for the 2-dimensional control points <code>ps</code>.</p></div></div><h2 id="extrapolation"><a href="#extrapolation" class="anchor"></a>Extrapolation</h2><div class="odoc-spec"><div class="spec value" id="val-extrapolate" class="anchored"><a href="#val-extrapolate" class="anchor"></a><code><span><span class="keyword">val</span> extrapolate : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <span>float option</span></span></code></div><div class="spec-doc"><p><code>extrapolate t x</code></p><p>Calculate the corresponding dependent value (e.g. <code>Some y</code>) for the given independent value <code>x</code> using the cubic spline fit coefficient in <code>t</code>. If <code>x</code> does not fall within the range of the control values used to generate <code>t</code>, <code>None</code> is returned.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-extrapolate_path" class="anchored"><a href="#val-extrapolate_path" class="anchor"></a><code><span><span class="keyword">val</span> extrapolate_path : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>float list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../V2/index.html#type-t">V2.t</a> list</span></span></code></div><div class="spec-doc"><p><code>extrapolate_path t xs</code></p><p>Use <code>t</code> to extrapolate <code>xs</code> into a 2-dimensional cubic spline path.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-interpolate_path" class="anchored"><a href="#val-interpolate_path" class="anchor"></a><code><span><span class="keyword">val</span> interpolate_path : <span>fn:int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../V2/index.html#type-t">V2.t</a> list</span></span></code></div><div class="spec-doc"><p><code>interpolate_path t n</code></p><p>Use <code>t</code> to interpolate 2-dimensional cubic spline path with <code>n</code> evently spaced points.</p></div></div><h2 id="utility"><a href="#utility" class="anchor"></a>Utility</h2><div class="odoc-spec"><div class="spec value" id="val-coef_to_string" class="anchored"><a href="#val-coef_to_string" class="anchor"></a><code><span><span class="keyword">val</span> coef_to_string : <span><a href="#type-coef">coef</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>coef_to_string c</code></p><p>Show contents of <code>c</code> as a string.</p></div></div></div></body></html>