<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Cap (OCADml.OCADml.Mesh.Cap)</title><link rel="stylesheet" href="../../../../_odoc_support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../_odoc_support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">OCADml</a> &#x00BB; <a href="../../index.html">OCADml</a> &#x00BB; <a href="../index.html">Mesh</a> &#x00BB; Cap</nav><header class="odoc-preamble"><h1>Module <code><span>Mesh.Cap</span></code></h1><p>Configuration module for declaring how extrusions from 2d to 3d via <a href="../index.html#val-sweep"><code>sweep</code></a> should be capped off.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-offset"><a href="#type-offset" class="anchor"></a><code><span><span class="keyword">type</span> offset</span><span> = </span><span>{</span></code><ol><li id="type-offset.d" class="def record field anchored"><a href="#type-offset.d" class="anchor"></a><code><span>d : float;</span></code></li><li id="type-offset.z" class="def record field anchored"><a href="#type-offset.z" class="anchor"></a><code><span>z : float;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>Offset diameter <code>d</code> (positive or negative), and corresponding vertical step <code>z</code> (enforced positive only when consumed).</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-offset_mode"><a href="#type-offset_mode" class="anchor"></a><code><span><span class="keyword">type</span> offset_mode</span><span> = </span></code><ol><li id="type-offset_mode.Delta" class="def variant constructor anchored"><a href="#type-offset_mode.Delta" class="anchor"></a><code><span>| </span><span><span class="constructor">Delta</span></span></code></li><li id="type-offset_mode.Chamfer" class="def variant constructor anchored"><a href="#type-offset_mode.Chamfer" class="anchor"></a><code><span>| </span><span><span class="constructor">Chamfer</span></span></code></li><li id="type-offset_mode.Radius" class="def variant constructor anchored"><a href="#type-offset_mode.Radius" class="anchor"></a><code><span>| </span><span><span class="constructor">Radius</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-offset_mode.fn" class="def record field anchored"><a href="#type-offset_mode.fn" class="anchor"></a><code><span>fn : <span>int option</span>;</span></code></li><li id="type-offset_mode.fs" class="def record field anchored"><a href="#type-offset_mode.fs" class="anchor"></a><code><span>fs : <span>float option</span>;</span></code></li><li id="type-offset_mode.fa" class="def record field anchored"><a href="#type-offset_mode.fa" class="anchor"></a><code><span>fa : <span>float option</span>;</span></code></li></ol><code><span>}</span></code></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-offsets"><a href="#type-offsets" class="anchor"></a><code><span><span class="keyword">type</span> offsets</span></code></div><div class="spec-doc"><p>A list of <a href="#type-offset"><code>offset</code></a> describing a 3d end-cap extrusion roundover. Abstracted to enforce use of constructors.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-holes"><a href="#type-holes" class="anchor"></a><code><span><span class="keyword">type</span> holes</span><span> = </span><span>[ </span></code><ol><li id="type-holes.Same" class="def constructor anchored"><a href="#type-holes.Same" class="anchor"></a><code><span>| </span></code><code><span>`Same</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Offset <code>d</code> and <code>z</code> values from outer are copied.</p><span class="comment-delim">*)</span></div></li><li id="type-holes.Flip" class="def constructor anchored"><a href="#type-holes.Flip" class="anchor"></a><code><span>| </span></code><code><span>`Flip</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Offset <code>d</code> and <code>z</code> values from outer are copied, but <code>d</code> sign is flipped.</p><span class="comment-delim">*)</span></div></li><li id="type-holes.Spec" class="def constructor anchored"><a href="#type-holes.Spec" class="anchor"></a><code><span>| </span></code><code><span>`Spec <span class="keyword">of</span> <a href="#type-offsets">offsets</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Supplies a different set of offsets for the holes. Note that this should have the same <code>z</code> values, or else the roundover mesh will not be well formed.</p><span class="comment-delim">*)</span></div></li><li id="type-holes.Mix" class="def constructor anchored"><a href="#type-holes.Mix" class="anchor"></a><code><span>| </span></code><code><span>`Mix <span class="keyword">of</span> <span><span>[ `Same <span>| `Flip</span> <span><span>| `Spec</span> of <a href="#type-offsets">offsets</a></span> ]</span> list</span></span></code></li></ol><code><span> ]</span></code></div><div class="spec-doc"><p>Specifies how holes in the end-cap should be treated, either relative to the outer shape, or independantly. When multiple holes are present, <code>`Mix</code> allows each one to be specified separately, to treat all the same, use the other variants directly.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-poly"><a href="#type-poly" class="anchor"></a><code><span><span class="keyword">type</span> poly</span><span> = </span><span>{</span></code><ol><li id="type-poly.outer" class="def record field anchored"><a href="#type-poly.outer" class="anchor"></a><code><span>outer : <a href="#type-offsets">offsets</a>;</span></code></li><li id="type-poly.holes" class="def record field anchored"><a href="#type-poly.holes" class="anchor"></a><code><span>holes : <a href="#type-holes">holes</a>;</span></code></li><li id="type-poly.mode" class="def record field anchored"><a href="#type-poly.mode" class="anchor"></a><code><span>mode : <a href="#type-offset_mode">offset_mode</a>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-poly_spec"><a href="#type-poly_spec" class="anchor"></a><code><span><span class="keyword">type</span> poly_spec</span><span> = </span><span>[ </span></code><ol><li id="type-poly_spec.Empty" class="def constructor anchored"><a href="#type-poly_spec.Empty" class="anchor"></a><code><span>| </span></code><code><span>`Empty</span></code></li><li id="type-poly_spec.Flat" class="def constructor anchored"><a href="#type-poly_spec.Flat" class="anchor"></a><code><span>| </span></code><code><span>`Flat</span></code></li><li id="type-poly_spec.Round" class="def constructor anchored"><a href="#type-poly_spec.Round" class="anchor"></a><code><span>| </span></code><code><span>`Round <span class="keyword">of</span> <a href="#type-poly">poly</a></span></code></li></ol><code><span> ]</span></code></div><div class="spec-doc"><p>Specifies whether an end of the extrusion should be left <code>`Empty</code>, sealed with a <code>`Flat</code> face, or <code>`Round</code>ed over with a given offset specification.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-caps"><a href="#type-caps" class="anchor"></a><code><span><span class="keyword">type</span> caps</span></code></div><div class="spec-doc"><p>Cap specification (flat, open, or round) type of <a href="#type-t"><code>t</code></a>. See <a href="#val-capped"><code>capped</code></a> for construction.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = </span><span>[ </span></code><ol><li id="type-t.Looped" class="def constructor anchored"><a href="#type-t.Looped" class="anchor"></a><code><span>| </span></code><code><span>`Looped</span></code></li><li id="type-t.Caps" class="def constructor anchored"><a href="#type-t.Caps" class="anchor"></a><code><span>| </span></code><code><span>`Caps <span class="keyword">of</span> <a href="#type-caps">caps</a></span></code></li></ol><code><span> ]</span></code></div><div class="spec-doc"><p>Top-level configuration type for <a href="../index.html#val-sweep"><code>sweep</code></a>, allowing for the end-caps to be specified using the types above, or to simply loop the first and last layers of the mesh together (see: <a href="../index.html#type-endcaps"><code>endcaps</code></a> <code>`Loop</code> as used by <a href="../index.html#val-of_rows"><code>of_rows</code></a>).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-chamf"><a href="#val-chamf" class="anchor"></a><code><span><span class="keyword">val</span> chamf : 
  <span>?angle:float <span class="arrow">&#45;&gt;</span></span>
  <span>?cut:float <span class="arrow">&#45;&gt;</span></span>
  <span>?width:float <span class="arrow">&#45;&gt;</span></span>
  <span>?height:float <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-offsets">offsets</a></span></code></div><div class="spec-doc"><p><code>chamf ?angle ?cut ?width ?height ()</code></p><p>Create offsets that will produce a chamfer roundover. One of <code>cut</code> (amount of corner &quot;cut off&quot;), <code>width</code> (horizontal distance of chamfer), or <code>height</code> (vertical distance of chamfer) can be specified to be used in conjunction with <code>angle</code> (default = pi / 4), or <code>width</code> and <code>height</code> can be provided together, in which case <code>angle</code> is not used.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-circ"><a href="#val-circ" class="anchor"></a><code><span><span class="keyword">val</span> circ : <span>?fn:int <span class="arrow">&#45;&gt;</span></span> <span><span>[&lt; <span>`Cut of float</span> <span><span>| `Radius</span> of float</span> ]</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-offsets">offsets</a></span></code></div><div class="spec-doc"><p><code>circ ?fn roundover</code></p><p>Create offsets that will produce a circular roundover, according to either a given <code>`Cut</code> distance, or a <code>`Radius</code>, over <code>fn</code> steps (default 16).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-tear"><a href="#val-tear" class="anchor"></a><code><span><span class="keyword">val</span> tear : <span>?fn:int <span class="arrow">&#45;&gt;</span></span> <span><span>[&lt; <span>`Cut of float</span> <span><span>| `Radius</span> of float</span> ]</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-offsets">offsets</a></span></code></div><div class="spec-doc"><p><code>tear ?fn roundover</code></p><p>Create offsets that will produce a teardrop rounover (circular, endind in a chamfer).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bez"><a href="#val-bez" class="anchor"></a><code><span><span class="keyword">val</span> bez : 
  <span>?curv:float <span class="arrow">&#45;&gt;</span></span>
  <span>?fn:int <span class="arrow">&#45;&gt;</span></span>
  <span><span>[&lt; <span>`Cut of float</span> <span><span>| `Joint</span> of float</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-offsets">offsets</a></span></code></div><div class="spec-doc"><p><code>bez ?curv ?fn spec</code></p><p>Create offsets that will produce a smooth bezier roundover. The amplitude of the curve can be given by <code>`Cut</code> (amount of corner &quot;cut off&quot;), or <code>`Joint</code> (distance vertically the bezier covers). <code>curv</code> is the curvature smoothness parameter, ranging from gradual <code>0.</code>, to abrupt <code>1.</code> (default <code>0.5</code>).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-offsets"><a href="#val-offsets" class="anchor"></a><code><span><span class="keyword">val</span> offsets : <span><span><a href="#type-offset">offset</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-offsets">offsets</a></span></code></div><div class="spec-doc"><p><code>offsets offsets</code></p><p>Sanitize (enforce positive and increasing <code>z</code> values) and pack a list of <a href="#type-offset"><code>offset</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unwrap_offsets"><a href="#val-unwrap_offsets" class="anchor"></a><code><span><span class="keyword">val</span> unwrap_offsets : <span><a href="#type-offsets">offsets</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-offset">offset</a> list</span></span></code></div><div class="spec-doc"><p><code>unwrap_offsets offsets</code></p><p>Retrieve list of <a href="#type-offset"><code>offset</code></a> from the abstract <a href="#type-offsets"><code>offsets</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-round"><a href="#val-round" class="anchor"></a><code><span><span class="keyword">val</span> round : <span>?mode:<a href="#type-offset_mode">offset_mode</a> <span class="arrow">&#45;&gt;</span></span> <span>?holes:<a href="#type-holes">holes</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-offsets">offsets</a> <span class="arrow">&#45;&gt;</span></span> <span>[&gt; <span>`Round of <a href="#type-poly">poly</a></span> ]</span></span></code></div><div class="spec-doc"><p><code>round ?mode ?holes offsets</code></p><p>Construct a roundover <a href="#type-poly_spec"><code>poly_spec</code></a>. <code>mode</code> specifies the kind offset (see <a href="../../Path2/index.html#val-offset"><code>Path2.offset</code></a>) performed on the paths on each &quot;vertical&quot; step of the roundover. Roundover behaviour for inner paths are specified with <code>holes</code>. This defaults to <code>`Flip</code>, as for the more common positive roundovers (flaring inward), using <code>`Same</code> polarity would lead to &quot;pinching off&quot; of the holes.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-looped"><a href="#val-looped" class="anchor"></a><code><span><span class="keyword">val</span> looped : <span>[&gt; `Looped ]</span></span></code></div><div class="spec-doc"><p><code>looped</code></p><p><code>Looped</code>, indicating that the top should loop around to the bottom of a sweep.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-capped"><a href="#val-capped" class="anchor"></a><code><span><span class="keyword">val</span> capped : <span>top:<a href="#type-poly_spec">poly_spec</a> <span class="arrow">&#45;&gt;</span></span> <span>bot:<a href="#type-poly_spec">poly_spec</a> <span class="arrow">&#45;&gt;</span></span> <span>[&gt; <span>`Caps of <a href="#type-caps">caps</a></span> ]</span></span></code></div><div class="spec-doc"><p><code>capped ~top ~bot</code></p><p>Construct a <a href="#type-t"><code>Cap.t</code></a> specifying how the <code>top</code> and <code>bot</code> caps of a sweep extrusion should be sealed off (or not).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-flat_caps"><a href="#val-flat_caps" class="anchor"></a><code><span><span class="keyword">val</span> flat_caps : <span>[&gt; <span>`Caps of <a href="#type-caps">caps</a></span> ]</span></span></code></div><div class="spec-doc"><p><code>flat_caps</code></p><p>Default <a href="#type-t"><code>Cap.t</code></a> configuration for flat (no roundover) sealed caps.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-open_caps"><a href="#val-open_caps" class="anchor"></a><code><span><span class="keyword">val</span> open_caps : <span>[&gt; <span>`Caps of <a href="#type-caps">caps</a></span> ]</span></span></code></div><div class="spec-doc"><p><code>open_caps</code></p><p>Default <a href="#type-t"><code>Cap.t</code></a> configuration for unsealed caps (open ends).</p></div></div></div></body></html>