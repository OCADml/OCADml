<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>BallTree2 (OCADml.OCADml.BallTree2)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">OCADml</a> &#x00BB; <a href="../index.html">OCADml</a> &#x00BB; BallTree2</nav><header class="odoc-preamble"><h1>Module <code><span>OCADml.BallTree2</span></code></h1><p>Construction of 2d vector space partitioning <a href="https://en.wikipedia.org/wiki/Ball_tree">ball tree</a> structures for <a href="https://en.wikipedia.org/wiki/Nearest_neighbor_search">nearest neighbour search</a>. Implementation adapted from the <a href="https://github.com/revarbat/BOSL2/blob/master/vectors.scad#L483">BOSL2 vectors module</a>.</p><p>Construction of these trees should be O(n log n) and searches should be O(log n), though real life performance depends on how the data is distributed. Thus, this structure is primarily useful when performing many searches of the same data. Below a certain number of points, it may be better to perform a direct search.</p></header><div class="odoc-content"><div class="odoc-include"><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>Ball Tree structure.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-(.%())" class="anchored"><a href="#val-(.%())" class="anchor"></a><code><span><span class="keyword">val</span> (.%()) : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <a href="../V2/index.html#type-t">V2.t</a></span></code></div><div class="spec-doc"><p><code>t.%(idx)</code></p><p>Indexed access to vectors/points used to build the ball tree <code>t</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-points" class="anchored"><a href="#val-points" class="anchor"></a><code><span><span class="keyword">val</span> points : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../V2/index.html#type-t">V2.t</a> list</span></span></code></div><div class="spec-doc"><p><code>points t</code></p><p>Return a list of the vectors/points used to build the ball tree <code>t</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-points'" class="anchored"><a href="#val-points'" class="anchor"></a><code><span><span class="keyword">val</span> points' : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../V2/index.html#type-t">V2.t</a> array</span></span></code></div><div class="spec-doc"><p><code>points' t</code></p><p>Return a copied array of the vectors/points used to build the ball tree <code>t</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-make" class="anchored"><a href="#val-make" class="anchor"></a><code><span><span class="keyword">val</span> make : <span>?leaf_size:int <span class="arrow">&#45;&gt;</span></span> <span><span><a href="../V2/index.html#type-t">V2.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>make ?leaf_size pts</code></p><p>Build a ball tree from the list of vectors <code>pts</code>. Recursive construction of the tree will cease branching when a node holds a number of points less than or equal to <code>leaf_size</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-make'" class="anchored"><a href="#val-make'" class="anchor"></a><code><span><span class="keyword">val</span> make' : <span>?leaf_size:int <span class="arrow">&#45;&gt;</span></span> <span><span><a href="../V2/index.html#type-t">V2.t</a> array</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>make' ?leaf_size pts</code></p><p>Build a ball tree from the array of vectors <code>pts</code>. Recursive construction of the tree will cease branching when a node holds a number of points less than or equal to <code>leaf_size</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-search_idxs" class="anchored"><a href="#val-search_idxs" class="anchor"></a><code><span><span class="keyword">val</span> search_idxs : <span>?radius:float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../V2/index.html#type-t">V2.t</a> <span class="arrow">&#45;&gt;</span></span> <span>int list</span></span></code></div><div class="spec-doc"><p><code>search_idxs ?radius t p</code></p><p>Search through the ball tree <code>t</code> for points that are within a distance <code>radius</code> of the target point <code>p</code>. Matches are returned as an arbitrarily ordered list of indices (into the point array used to construct <code>t</code>).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-search_points" class="anchored"><a href="#val-search_points" class="anchor"></a><code><span><span class="keyword">val</span> search_points : <span>?radius:float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../V2/index.html#type-t">V2.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../V2/index.html#type-t">V2.t</a> list</span></span></code></div><div class="spec-doc"><p><code>search_points ?radius t p</code></p><p>Search through the ball tree <code>t</code> for points that are within a distance <code>radius</code> of the target point <code>p</code>. Matches are returned as an arbitrarily ordered (not sorted from nearest to furthest) list of points.</p></div></div></div></div></body></html>